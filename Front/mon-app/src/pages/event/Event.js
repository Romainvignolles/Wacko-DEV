import React, { useEffect, useState } from "react";
import Navbar from '../../components/navbar/Navbar';
import axios from 'axios';


import { Swiper, SwiperSlide } from "swiper/react";
import "swiper/css";
import "swiper/css/effect-coverflow";
import "swiper/css/pagination";

import { EffectCoverflow, Pagination } from "swiper";



const EventPage = (props) => {

    const [allEvent, setAllEvent] = useState([]);

    const fetchEvent = () => {              //recupÃ©ration des events
        axios({
            method: "get",
            url: `${process.env.REACT_APP_API_URL}api/getAllEvent`,
        })
            .then((res) => {
                setAllEvent(res.data)

            })
            .catch((err) => {
            })
    }

    useEffect(() => {
        fetchEvent()
    }, []);

    const displayEvent = (e) => {
        let focusID = e.target.parentNode.parentNode.id
        localStorage.setItem("eventID", focusID);
        window.location = "/displayEvent";
    }

    return (

        <div className="eventPageBackground">
            <Navbar />
            <div className='eventPage'>

                <Swiper
                    effect={"coverflow"}
                    grabCursor={true}
                    centeredSlides={true}
                    slidesPerView={"auto"}
                    coverflowEffect={{
                        rotate: 50,
                        stretch: 0,
                        depth: 100,
                        modifier: 1,
                        slideShadows: true,
                    }}
                    pagination={true}
                    modules={[EffectCoverflow, Pagination]}
                    className="eventSwiper"
                >
                    {allEvent.map(event => (
                        <SwiperSlide className="eventSwipperCard" key={event.id} id={event.id}>
                            <div className="eventSwipperCard__info">
                                {event.eventType === "Logistique" &&
                                    <svg fill="#000000" width="800px" height="800px" viewBox="-1 0 19 19" xmlns="http://www.w3.org/2000/svg" class="cf-icon-svg"><path d="M16.014 8.86v1.44a.587.587 0 0 1-.468.556l-1.182.204a.463.463 0 0 1-.114.006 5.902 5.902 0 0 1-.634 1.528.455.455 0 0 1 .078.084l.691.98a.586.586 0 0 1-.062.725l-1.02 1.02a.586.586 0 0 1-.724.061l-.98-.69a.444.444 0 0 1-.085-.078 5.908 5.908 0 0 1-1.544.637.502.502 0 0 1 0 .175l-.182 1.053a.667.667 0 0 1-.633.532h-1.31a.667.667 0 0 1-.633-.532l-.182-1.053a.495.495 0 0 1 0-.175 5.908 5.908 0 0 1-1.544-.637.444.444 0 0 1-.085.077l-.98.691a.586.586 0 0 1-.725-.062l-1.02-1.02a.586.586 0 0 1-.061-.723l.691-.98a.454.454 0 0 1 .077-.085 5.901 5.901 0 0 1-.633-1.528.466.466 0 0 1-.114-.006l-1.182-.204a.586.586 0 0 1-.468-.556V8.86a.586.586 0 0 1 .468-.556L2.636 8.1a.437.437 0 0 1 .114-.005 5.912 5.912 0 0 1 .633-1.528.466.466 0 0 1-.077-.085l-.691-.98a.587.587 0 0 1 .061-.724l1.02-1.02a.587.587 0 0 1 .725-.062l.98.691a.444.444 0 0 1 .085.078 5.903 5.903 0 0 1 1.528-.634.433.433 0 0 1 .005-.114l.204-1.182a.586.586 0 0 1 .556-.468h1.442a.586.586 0 0 1 .556.468l.204 1.182a.448.448 0 0 1 .005.114 5.908 5.908 0 0 1 1.528.634.444.444 0 0 1 .085-.078l.98-.691a.586.586 0 0 1 .724.062l1.02 1.02a.586.586 0 0 1 .062.724l-.691.98a.467.467 0 0 1-.078.085 5.902 5.902 0 0 1 .634 1.528.434.434 0 0 1 .114.005l1.182.204a.587.587 0 0 1 .468.556zm-4.955.72a2.559 2.559 0 1 0-2.56 2.56 2.559 2.559 0 0 0 2.56-2.56z" /></svg>
                                }
                                {event.eventType === "Combat" &&
                                    <svg fill="#000000" height="800px" width="800px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 296 296" ><g><path d="M270.213,296c0-61-22.546-93.876-57.546-109.694V296H270.213z" /><path d="M25.787,296h55.88V186.766C48.667,202.765,25.787,236,25.787,296z" /><path d="M147.667,205.006c-18.313,0-35-5.171-50-14.124V296h99V191.486C182.667,200.066,165.563,205.006,147.667,205.006z" /><path d="M148,82c39.888,0,74.516,8.21,93.974,13.999c0.001-1.792,0.002-3.523,0.003-5.103c0.002-4.494,0.004-7.783,0.005-7.886 C241.58,37.091,207.705,0,164.954,0H132.8C90.051,0,54.441,37.091,54.02,83.011c0.001,0.103,0.003,3.39,0.005,7.879 c0.001,1.581,0.002,3.314,0.003,5.108C73.486,90.21,108.113,82,148,82z" /><path d="M56.381,127.202c4.352-1.337,8.745-2.561,13.162-3.706c6.718,37.246,39.276,65.51,78.457,65.51 c39.274,0,71.895-28.398,78.505-65.777c4.399,1.145,8.771,2.371,13.102,3.708c0.81,0.251,1.628,0.363,2.432,0.356 c3.39-0.028,6.52-2.227,7.573-5.639c0.723-2.339,0.316-4.754-0.906-6.668c-0.983-1.54-2.66-2.756-4.542-3.337 c-10.911-3.37-21.496-6.142-33.496-8.337v10.811c0,15.926-12.991,28.837-28.918,28.837c-12.887,0-23.946-8.391-27.452-20.111 c-3.01-10.058,0.268-21.694-6.171-21.977c-6.44,0.282-3.182,11.919-6.192,21.977c-3.508,11.721-14.972,20.111-27.859,20.111 c-15.928,0-29.407-12.911-29.407-28.837v-10.538c-11,2.203-22.233,4.97-33.15,8.322c-1.745,0.536-3.084,1.619-4.068,2.998 c-1.398,1.959-1.867,4.52-1.106,6.998c1.055,3.436,4.234,5.645,7.648,5.651c0.006,0,0.022,0.002,0.028,0.002 C54.797,127.557,55.599,127.442,56.381,127.202z" /></g></svg>
                                }
                                {event.eventType === "Vol" &&
                                    <svg fill="#000000" height="800px" width="800px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 218.16 218.16" ><path d="M73.778,188.362l-37.454,5.717c-2.978,0.451-5.941-0.918-7.52-3.484L14.838,167.89c-0.779-1.267-1.135-2.709-1.094-4.144 c-0.006-0.12-0.018-0.237-0.018-0.358v-48.03c0-4.143,3.358-7.5,7.5-7.5s7.5,3.357,7.5,7.5v19.927L58.71,81.887l15.068,25.715 V188.362z M196.934,107.857c-4.143,0-7.5,3.357-7.5,7.5v19.927l-29.983-53.397l-15.068,25.716v80.76l37.454,5.717 c2.976,0.452,5.941-0.918,7.521-3.485l13.965-22.705c0.779-1.266,1.134-2.708,1.093-4.143c0.006-0.12,0.018-0.237,0.018-0.358 v-48.03C204.434,111.215,201.076,107.857,196.934,107.857z M129.383,188.679l-12.803,9.547v12.434c0,4.143-3.357,7.5-7.5,7.5 c-4.142,0-7.5-3.357-7.5-7.5v-12.434l-12.803-9.547v-83.112c0-1.333-0.355-2.642-1.029-3.792l-20.531-35.04l35.323-62.907 C103.868,1.464,106.369,0,109.08,0c2.712,0,5.212,1.464,6.54,3.828l35.323,62.907l-20.531,35.04 c-0.674,1.15-1.029,2.459-1.029,3.792V188.679z M129.348,68.613c3.194-2.636,3.647-7.363,1.012-10.559 c-0.868-1.053-8.839-10.284-21.09-10.284c-12.123,0-20.421,9.083-21.327,10.119c-2.728,3.117-2.432,7.877,0.686,10.604 c1.429,1.25,3.193,1.865,4.949,1.865c2.075,0,4.138-0.859,5.615-2.548c1.268-1.402,5.55-5.041,10.078-5.041 c5.316,0,9.519,4.831,9.519,4.831C121.426,70.796,126.153,71.249,129.348,68.613z" /></svg>
                                }
                                {event.eventType === "Toute" &&
                                    <svg xmlns="http://www.w3.org/2000/svg" width="100" height="50"><text x="0" y="40" font-weight="bold" font-size="48">ALL</text></svg>
                                }

                                <h1>{event.titre}</h1>
                                <div className="eventSwipperCard__botInfo">
                                    <h3>{event.date}</h3>
                                    <h3>Serveur: {event.serveur}</h3>
                                </div>
                                <button onClick={displayEvent}>Voir l'event</button>
                            </div>
                            <img src={event.image} />
                        </SwiperSlide>
                    ))}

                </Swiper>
            </div>
        </div>
    );
};

export default EventPage;